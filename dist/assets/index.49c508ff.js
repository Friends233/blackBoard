(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();class o{constructor(e=document.querySelector("#canvas"),i=e.getContext("2d"),l={lineStyle:"#ffffff",bgStyle:"#000000",lineWidth:1,eraserWidth:10},t="#ffffff",s="#000000",n=1){this.el=e,this.stage=i,this.resetInfo=l,this.lineStyle=t,this.bgStyle=s,this.lineWidth=n,this.init()}init(){this.reset(),this.stage.fillStyle=this.bgStyle,this.stage.fillRect(0,0,this.el.width,this.el.height),this.init_event(),this.init_btns()}init_event(){const e=this.drawEventCallback.bind(this);this.el.addEventListener("mousedown",()=>{this.stage.beginPath(),this.el.addEventListener("mousemove",e)}),document.addEventListener("mouseup",()=>{this.el.removeEventListener("mousemove",e)})}init_btns(){document.querySelector(".btn-clear").addEventListener("click",this.clearAll.bind(this));const i=document.querySelector(".btn-eraser");i==null||i.addEventListener("click",this.eraser.bind(this));const l=document.querySelector(".color-select");l.value=this.lineStyle,l==null||l.addEventListener("input",()=>{this.setLineColor(l.value)});const t=document.querySelector(".bg-select");t.value=this.bgStyle,t==null||t.addEventListener("input",()=>{this.setBgStyle(t.value)});const s=document.querySelector(".btn-download");s==null||s.addEventListener("click",this.download.bind(this))}reset(){var e,i;this.lineStyle=(e=this.resetInfo)==null?void 0:e.lineStyle,this.bgStyle=(i=this.resetInfo)==null?void 0:i.bgStyle,this.lineWidth=this.resetInfo.lineWidth}clearAll(){this.stage.fillStyle=this.bgStyle,this.stage.fillRect(0,0,this.el.width,this.el.height)}eraser(e){const i=e.target;this.lineStyle===this.bgStyle?(i.className=i.className.replace(" active-btn",""),this.lineStyle=this.resetInfo.lineStyle,this.lineWidth=this.resetInfo.lineWidth):(i.className+=" active-btn",this.lineStyle=this.bgStyle,this.lineWidth=this.resetInfo.eraserWidth)}drawEventCallback(e){this.stage.lineTo(e.offsetX,e.offsetY),this.stage.strokeStyle=this.lineStyle,this.stage.lineWidth=this.lineWidth,this.stage.stroke()}setLineColor(e){this.lineStyle=e,this.resetInfo.lineStyle=e}setBgStyle(e){this.lineStyle===this.bgStyle&&(this.lineStyle=e),this.bgStyle=e,this.stage.fillStyle=this.bgStyle,this.stage.fillRect(0,0,this.el.width,this.el.height)}download(){const e=this.el.toDataURL("image/jpeg"),i=document.createElement("a");i.href=e,i.download="\u753B\u677F",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}new o;
