(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();class h{constructor(e=document.querySelector("#canvas"),t=e.getContext("2d"),l={lineStyle:"#ffffff",bgStyle:"#000000",lineWidth:1,eraserWidth:10},i="#ffffff",s="#000000",n=1){this.el=e,this.stage=t,this.resetInfo=l,this.lineStyle=i,this.bgStyle=s,this.lineWidth=n,this.init()}init(){this.reset(),this.stage.fillStyle=this.bgStyle,this.stage.fillRect(0,0,this.el.width,this.el.height),this.init_event(),this.init_btns()}init_event(){const e=this.drawEventCallback.bind(this),t=document.querySelector(".color-select");t.value=this.lineStyle,t==null||t.addEventListener("input",()=>{this.setLineColor(t.value)});const l=document.querySelector(".bg-select");l.value=this.bgStyle,l==null||l.addEventListener("input",()=>{this.setBgStyle(l.value)}),this.el.addEventListener("mousedown",()=>{this.stage.beginPath(),this.el.addEventListener("mousemove",e)}),document.addEventListener("mouseup",()=>{this.el.removeEventListener("mousemove",e)})}init_btns(){document.querySelector(".btn-clear").addEventListener("click",this.clearAll.bind(this));const t=document.querySelector(".btn-eraser");t==null||t.addEventListener("click",this.eraser.bind(this))}reset(){var e,t;this.lineStyle=(e=this.resetInfo)==null?void 0:e.lineStyle,this.bgStyle=(t=this.resetInfo)==null?void 0:t.bgStyle,this.lineWidth=this.resetInfo.lineWidth}clearAll(){this.stage.fillStyle=this.bgStyle,this.stage.fillRect(0,0,this.el.width,this.el.height)}eraser(e){const t=e.target;this.lineStyle===this.bgStyle?(t.className=t.className.replace(" active-btn",""),this.lineStyle=this.resetInfo.lineStyle,this.lineWidth=this.resetInfo.lineWidth):(t.className+=" active-btn",this.lineStyle=this.bgStyle,this.lineWidth=this.resetInfo.eraserWidth)}drawEventCallback(e){this.stage.lineTo(e.offsetX,e.offsetY),this.stage.strokeStyle=this.lineStyle,this.stage.lineWidth=this.lineWidth,this.stage.stroke()}setLineColor(e){this.lineStyle=e,this.resetInfo.lineStyle=e}setBgStyle(e){this.resetInfo.lineStyle=e,this.bgStyle=e,this.stage.fillStyle=this.bgStyle,this.stage.fillRect(0,0,this.el.width,this.el.height)}}new h;
